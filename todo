Общее: 
    статистика тестирования
    заменить getopt на optparse (неудобно, да)
    сделать более адекватную обработку исключений

ЛА: 
    double dot внутри float
    рефакторинг read_string
    форматирование вывода: '+' на пересечениях, убрать удвоенные линии
    возможно убрать восстановление после ошибки (надо подумать, как оно с СА сочетается)

СА:
    рефакторинг parse_factor()
    вывод деревом